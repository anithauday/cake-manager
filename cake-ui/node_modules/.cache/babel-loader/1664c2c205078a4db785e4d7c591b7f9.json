{"ast":null,"code":"var _jsxFileName = \"/Users/baran/Desktop/cake-manager/cake-ui/src/components/user/AddCake.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Container } from 'semantic-ui-react';\nimport OrderTable from './OrderTable';\nimport AuthContext from '../context/AuthContext';\nimport { cakeApi } from '../misc/CakeApi';\nimport { handleLogError } from '../misc/Helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AddCake extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userMe: null,\n      isUser: true,\n      isLoading: false,\n      cakeDescription: '',\n      cakeTitle: '',\n      cakeImage: ''\n    };\n\n    this.handleInputChange = (e, {\n      name,\n      value\n    }) => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleGetUserMe = () => {\n      const Auth = this.context;\n      const user = Auth.getUser();\n      this.setState({\n        isLoading: true\n      });\n      cakeApi.getUserMe(user).then(response => {\n        this.setState({\n          userMe: response.data\n        });\n      }).catch(error => {\n        handleLogError(error);\n      }).finally(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleCreateOrder = () => {\n      const Auth = this.context;\n      const user = Auth.getUser();\n      let {\n        cakeDescription\n      } = this.state;\n      let {\n        cakeImage\n      } = this.state;\n      let {\n        cakeTitle\n      } = this.state;\n      cakeDescription = cakeDescription.trim();\n      cakeImage = cakeImage.trim();\n      cakeTitle = cakeTitle.trim();\n      const cake = {\n        description: cakeDescription,\n        cakeImage: cakeImage,\n        cakeTitle: cakeTitle\n      };\n      cakeApi.createOrder(user, cake).then(() => {\n        this.handleGetUserMe();\n        this.setState({\n          cakeDescription: ''\n        });\n      }).catch(error => {\n        handleLogError(error);\n      });\n    };\n  }\n\n  componentDidMount() {\n    const Auth = this.context;\n    const user = Auth.getUser();\n    const isUser = user.data.rol[0] === 'USER';\n    this.setState({\n      isUser\n    });\n  }\n\n  render() {\n    if (!this.state.isUser) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 14\n      }, this);\n    } else {\n      const {\n        userMe,\n        isLoading,\n        cakeDescription\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(OrderTable, {\n          orders: userMe && userMe.orders,\n          isLoading: isLoading,\n          orderDescription: cakeDescription,\n          handleCreateOrder: this.handleCreateOrder,\n          handleInputChange: this.handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nAddCake.contextType = AuthContext;\nexport default AddCake;","map":{"version":3,"sources":["/Users/baran/Desktop/cake-manager/cake-ui/src/components/user/AddCake.js"],"names":["React","Component","Redirect","Container","OrderTable","AuthContext","cakeApi","handleLogError","AddCake","state","userMe","isUser","isLoading","cakeDescription","cakeTitle","cakeImage","handleInputChange","e","name","value","setState","handleGetUserMe","Auth","context","user","getUser","getUserMe","then","response","data","catch","error","finally","handleCreateOrder","trim","cake","description","createOrder","componentDidMount","rol","render","orders","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { Container } from 'semantic-ui-react'\nimport OrderTable from './OrderTable'\nimport AuthContext from '../context/AuthContext'\nimport { cakeApi } from '../misc/CakeApi'\nimport { handleLogError } from '../misc/Helpers'\n\nclass AddCake extends Component {\n  static contextType = AuthContext\n\n  state = {\n    userMe: null,\n    isUser: true,\n    isLoading: false,\n    cakeDescription: '',\n    cakeTitle : '',\n    cakeImage : ''\n  }\n\n  componentDidMount() {\n    const Auth = this.context\n    const user = Auth.getUser()\n    const isUser = user.data.rol[0] === 'USER'\n    this.setState({ isUser })\n\n  }\n\n  handleInputChange = (e, {name, value}) => {\n    this.setState({ [name]: value })\n  }\n\n  handleGetUserMe = () => {\n    const Auth = this.context\n    const user = Auth.getUser()\n\n    this.setState({ isLoading: true })\n    cakeApi.getUserMe(user)\n      .then(response => {\n        this.setState({ userMe: response.data })\n      })\n      .catch(error => {\n        handleLogError(error)\n      })\n      .finally(() => {\n        this.setState({ isLoading: false })\n      })\n  }\n  \n  handleCreateOrder = () => {\n    const Auth = this.context\n    const user = Auth.getUser()\n\n    let { cakeDescription } = this.state\n    let { cakeImage } = this.state\n    let { cakeTitle } = this.state\n\n    cakeDescription = cakeDescription.trim()\n    cakeImage = cakeImage.trim()\n    cakeTitle = cakeTitle.trim()\n\n\n    const cake = { description: cakeDescription , cakeImage: cakeImage , cakeTitle: cakeTitle }\n    cakeApi.createOrder(user, cake)\n      .then(() => {\n        this.handleGetUserMe()\n        this.setState({ cakeDescription: '' })\n      })\n      .catch(error => {\n        handleLogError(error)\n      })\n  }\n\n  render() {\n    if (!this.state.isUser) {\n      return <Redirect to='/' />\n    } else {\n      const { userMe, isLoading, cakeDescription } = this.state\n      return (\n        <Container>\n          <OrderTable\n            orders={userMe && userMe.orders}\n            isLoading={isLoading}\n            orderDescription={cakeDescription}\n            handleCreateOrder={this.handleCreateOrder}\n            handleInputChange={this.handleInputChange}\n          />\n        </Container>\n      )\n    }\n  }\n}\n\nexport default AddCake"]},"metadata":{},"sourceType":"module"}