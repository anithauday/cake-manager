{"ast":null,"code":"var _jsxFileName = \"/Users/baran/Desktop/cake-manager/cake-ui/src/components/user/Download.js\";\nimport React, { Component } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport { cakeApi } from '../misc/CakeApi';\nimport { handleLogError } from '../misc/Helpers';\nimport { Container } from \"semantic-ui-react\";\nimport CakeTable from \"./CakeTable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Download extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userMe: null,\n      isUser: true,\n      isLoading: false,\n      cakeDescription: '',\n      image: '',\n      title: '',\n      data: []\n    };\n\n    this.handleDownloadCakes = () => {\n      const Auth = this.context;\n      const user = Auth.getUser();\n      this.setState({\n        isLoading: true\n      });\n      cakeApi.download(user).then(response => {\n        const filename = response.headers.get('Content-Disposition').split('filename=')[1];\n        response.blob().then(blob => {\n          let url = window.URL.createObjectURL(blob);\n          let a = document.createElement('a');\n          a.href = url;\n          a.download = filename;\n          a.click();\n        }); //window.location.href = response.url;\n      }).catch(error => {\n        handleLogError(error);\n      }).finally(() => {\n        this.setState({\n          isLoading: false\n        });\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Download File using React App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Download Employee Data using Button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleDownloadCakes,\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Download Employee Data using Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        onClick: this.handleDownloadCakes,\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nDownload.contextType = AuthContext;\nexport default Download;","map":{"version":3,"sources":["/Users/baran/Desktop/cake-manager/cake-ui/src/components/user/Download.js"],"names":["React","Component","AuthContext","cakeApi","handleLogError","Container","CakeTable","Download","state","userMe","isUser","isLoading","cakeDescription","image","title","data","handleDownloadCakes","Auth","context","user","getUser","setState","download","then","response","filename","headers","get","split","blob","url","window","URL","createObjectURL","a","document","createElement","href","click","catch","error","finally","render","contextType"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAAQC,OAAR,QAAsB,iBAAtB;AACA,SAAQC,cAAR,QAA6B,iBAA7B;AACA,SAAQC,SAAR,QAAwB,mBAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;;AAEA,MAAMC,QAAN,SAAuBN,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAG7BO,KAH6B,GAGrB;AACJC,MAAAA,MAAM,EAAE,IADJ;AAEJC,MAAAA,MAAM,EAAE,IAFJ;AAGJC,MAAAA,SAAS,EAAE,KAHP;AAIJC,MAAAA,eAAe,EAAE,EAJb;AAKJC,MAAAA,KAAK,EAAE,EALH;AAMJC,MAAAA,KAAK,EAAE,EANH;AAOJC,MAAAA,IAAI,EAAE;AAPF,KAHqB;;AAAA,SAc7BC,mBAd6B,GAcP,MAAM;AACxB,YAAMC,IAAI,GAAG,KAAKC,OAAlB;AACA,YAAMC,IAAI,GAAGF,IAAI,CAACG,OAAL,EAAb;AAEA,WAAKC,QAAL,CAAc;AAACV,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACAR,MAAAA,OAAO,CAACmB,QAAR,CAAiBH,IAAjB,EACKI,IADL,CACUC,QAAQ,IAAI;AACd,cAAMC,QAAQ,GAAID,QAAQ,CAACE,OAAT,CAAiBC,GAAjB,CAAqB,qBAArB,EAA4CC,KAA5C,CAAkD,WAAlD,EAA+D,CAA/D,CAAlB;AACAJ,QAAAA,QAAQ,CAACK,IAAT,GAAgBN,IAAhB,CAAqBM,IAAI,IAAI;AACzB,cAAIC,GAAG,GAAGC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BJ,IAA3B,CAAV;AACA,cAAIK,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR;AACAF,UAAAA,CAAC,CAACG,IAAF,GAASP,GAAT;AACAI,UAAAA,CAAC,CAACZ,QAAF,GAAaG,QAAb;AACAS,UAAAA,CAAC,CAACI,KAAF;AACH,SAND,EAFc,CASd;AACH,OAXL,EAYKC,KAZL,CAYWC,KAAK,IAAI;AACZpC,QAAAA,cAAc,CAACoC,KAAD,CAAd;AACH,OAdL,EAeKC,OAfL,CAea,MAAM;AACX,aAAKpB,QAAL,CAAc;AAACV,UAAAA,SAAS,EAAE;AAAZ,SAAd;AACH,OAjBL;AAkBH,KArC4B;AAAA;;AAuC7B+B,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,EAAE,EAAC,WAAR;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAQ,QAAA,OAAO,EAAE,KAAK1B,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAA;AAAA;AAAA;AAAA,cAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ,eAMI;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,OAAO,EAAE,KAAKA,mBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAUH;;AAlD4B;;AAA3BT,Q,CACKoC,W,GAAczC,W;AAqDzB,eAAeK,QAAf","sourcesContent":["import React, {Component} from 'react'\nimport AuthContext from '../context/AuthContext'\nimport {cakeApi} from '../misc/CakeApi'\nimport {handleLogError} from '../misc/Helpers'\nimport {Container} from \"semantic-ui-react\";\nimport CakeTable from \"./CakeTable\";\n\nclass Download extends Component {\n    static contextType = AuthContext\n\n    state = {\n        userMe: null,\n        isUser: true,\n        isLoading: false,\n        cakeDescription: '',\n        image: '',\n        title: '',\n        data: []\n    }\n\n\n    handleDownloadCakes = () => {\n        const Auth = this.context\n        const user = Auth.getUser()\n\n        this.setState({isLoading: true})\n        cakeApi.download(user)\n            .then(response => {\n                const filename =  response.headers.get('Content-Disposition').split('filename=')[1];\n                response.blob().then(blob => {\n                    let url = window.URL.createObjectURL(blob);\n                    let a = document.createElement('a');\n                    a.href = url;\n                    a.download = filename;\n                    a.click();\n                });\n                //window.location.href = response.url;\n            })\n            .catch(error => {\n                handleLogError(error)\n            })\n            .finally(() => {\n                this.setState({isLoading: false})\n            })\n    }\n\n    render() {\n        return (\n            <div id=\"container\">\n                <h1>Download File using React App</h1>\n                <h3>Download Employee Data using Button</h3>\n                <button onClick={this.handleDownloadCakes}>Download</button>\n                <p/>\n                <h3>Download Employee Data using Link</h3>\n                <a href=\"#\" onClick={this.handleDownloadCakes}>Download</a>\n            </div>\n        )\n    }\n\n}\n\nexport default Download"]},"metadata":{},"sourceType":"module"}